<div class="col-md-8 gn-record">
  <div class="gn-card gn-card-service">
    <div ng-include="'../../catalog/views/default/templates/recordView-title.html'"/>
    <!-- abstract -->
    <p data-ng-bind-html="(mdView.current.record.resourceAbstract) | linky | newlines"></p>
  </div>

  <!-- Display the first metadata status (apply to ISO19139 record) -->
<!--  <div class="row">-->
<!--    <div data-ng-if="mdView.current.record.cl_status.length > 0"-->
<!--         data-ng-repeat="c in mdView.current.record.cl_status track by $index">-->
<!--      <div data-ng-if="showStatusWatermarkFor.indexOf(c.key) === -1-->
<!--                               && showStatusTopBarFor.indexOf(c.key) === -1"-->
<!--           title="{{c.key | translate}}"-->
<!--           class="gn-status gn-status-mdview gn-status-{{c.key}}">-->
<!--        {{c.key | translate}}-->
<!--      </div>-->
<!--    </div>-->
<!--  </div>-->

  <div data-ng-if="showCitation"
       data-gn-metadata-citation="mdView.current.record"/>

  <div ng-include="'../../catalog/views/default/templates/recordView-tabbed.html'"/>

</div>

<div class="col-md-4 gn-md-side">

  <!-- summary -->
  <div ng-include="'../../catalog/views/default/templates/recordView-summary.html'"/>

  <div data-ng-show="mdView.current.record.resourceVerticalRange">
    <h2>
      <i class="fa fa-fw fa-clock-o"></i>
      <span data-translate="">resourceVerticalRange</span>
    </h2>

    <div class="flex flex-row flex-align-center gn-vertical-range"
         data-ng-repeat="range in mdView.current.record.resourceVerticalRange">
      <div class="width-25">
        <i class="fa fa-fw fa-chevron-up"/>
      </div>
      <div class="width-75">
        <div data-ng-show="range.lte">
          <dt>{{range.lte}}</dt>
        </div>
        <div data-ng-show="range.gte">
          <dt>{{range.gte}}</dt>
        </div>
      </div>
    </div>
  </div>
  </section>

  <section class="gn-md-side-overview" data-ng-if="mdView.current.record.overview.length > 0">
    <h2>
      <i class="fa fa-fw fa-image"></i>
      <span data-translate="">overview</span>
    </h2>

    <div data-ng-repeat="img in mdView.current.record.overview">
      <img data-gn-img-modal="img"
           class="gn-img-thumbnail img-thumbnail"
           alt="{{img.name}}"
           data-ng-src="{{img.url}}"/>

      <div class="gn-img-thumbnail-caption"
           data-ng-show="img.name">{{img.name}}
      </div>
    </div>
  </section>

  <section class="gn-md-side-extent" data-ng-if="mdView.current.record.geom || mdView.current.record.hasBoundingPolygon">
    <h2>
      <i class="fa fa-fw fa-map-marker"></i>
      <span data-translate="">extent</span>
    </h2>
    <p data-ng-if="mdView.current.record.extentDescription">
    <ul>
      <li data-ng-repeat="d in mdView.current.record.extentDescription">{{d}}</li>
    </ul>
    </p>
    <!-- TODO: use map config -->
    <p data-ng-if="mdView.current.record.geom || mdView.current.record.hasBoundingPolygon">
      <img class="gn-img-thumbnail img-thumbnail gn-img-extent"
           alt="{{'extent' | translate}}"
           aria-label="{{'extent' | translate}}"
           data-ng-src="../api/records/{{mdView.current.record.uuid}}/extents.png"/>
    </p>

  </section>



  <div data-gn-more-like-this="mdView.current.record"/>

  <div data-gn-userfeedback='mdView.current.record'
       data-gn-user={{user.username}}
       data-ng-if="isUserFeedbackEnabled && mdView.current.record.draft != 'y'">
  </div>
  <div data-gn-md-feedback="mdView.current.record"></div>
  </section>


  <section class="gn-md-side-social" data-ng-show="isSocialbarEnabled">
    <h2>
      <i class="fa fa-fw fa-share-square-o"></i>
      <span data-translate="">shareOn</span>
    </h2>
    <div class="btn-group">
      <a data-ng-href="https://twitter.com/share?url={{socialMediaLink | encodeURIComponent}}"
         title="{{'shareOnTwitter' | translate}}"
         target="_blank"
         class="btn btn-default"><i class="fa fa-fw fa-twitter"></i></a>
      <a
        data-ng-href="https://www.facebook.com/sharer.php?u={{socialMediaLink | encodeURIComponent}}"
        title="{{'shareOnFacebook' | translate}}"
        target="_blank"
        class="btn btn-default"><i class="fa fa-fw fa-facebook"></i></a>
      <a
        data-ng-href="http://www.linkedin.com/shareArticle?mini=true&amp;summary={{mdView.current.record.resourceTitle}}&amp;url={{socialMediaLink | encodeURIComponent}}"
        title="{{'shareOnLinkedIn' | translate}}"
        target="_blank"
        class="btn btn-default"><i class="fa fa-fw fa-linkedin"></i></a>
      <a
        data-ng-href="mailto:?subject={{mdView.current.record.resourceTitle}}&amp;body={{socialMediaLink | encodeURIComponent}}"
        title="{{'shareByEmail' | translate}}"
        target="_blank"
        class="btn btn-default"><i class="fa fa-fw fa-envelope-o"></i></a>
      <a
        data-ng-click="mdService.getPermalink(md)"
        href=""
        title="{{'permalink' | translate}}"
        class="btn btn-default"><i class="fa fa-fw fa-link"></i></a>
    </div>
  </section>


  <div data-ng-show="isRecordHistoryEnabled && user.isEditorOrMore() && mdView.current.record.draft != 'y'"
       data-gn-record-history="mdView.current.record"></div>


  <section class="gn-md-side-errors"
           data-ng-if="mdView.current.record.indexingErrorMsg
                                && user.canEditRecord(mdView.current.record)">
    <h2>
      <i class="fa fa-fw fa-cog"></i>
      <span data-translate="">indexingErrorMessages</span>
    </h2>
    <div class="alert alert-danger">
      <ul>
        <li data-ng-repeat="e in mdView.current.record.indexingErrorMsg">
          <code>
            {{e}}
          </code>
        </li>
      </ul>
    </div>
  </section>
</div>
